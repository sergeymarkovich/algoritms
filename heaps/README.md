Что поправить:
Нельзя строить кучу на всем вводе — в задании есть ограничение на размер кучи O(K). То есть в куче нужно хранить лишь порядка K элементов. Поправить-то совсем немного придется: делаем minHeap по частотности посещений, после добавления очередного пользователя в кучу проверяем, не стал ли размер кучи превышать K. Если стал — выкидываем вершину кучи, пока размер не вернется в норму. Выкинем точно не одного из топ К пользователей. Таким образом мы просеем всех пользователей, а самые частотные осядут на дне кучи, мы их не потеряем.

